import socket;

host = 'localhost';
port = 31400;
size = 1024;



# test loop for connection and disconnection 
for i in range(20000):	
	s = socket.socket(socket.AF_INET, socket.SOCK_STREAM);
	s.connect((host, port));
	# test
	for j in range(2):
		s.send(b'111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111');
		data = s.recv(size);
		print (repr(data));
		s.send(b'222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222');
		data = s.recv(size);
		print (repr(data));
		s.send(b'333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333');
		data = s.recv(size);
		print (repr(data));
	s.close();
	print ('[', i,'] Socket is cloesd.');

